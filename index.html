<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>SignAi — HOP 7.0 Alpha (BIO-ID + Vault + Content Origin) — FIX (50% rule)</title>
<style>
body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;padding:18px;background:#050a14;color:#eaf2ff}
pre{background:#0b152b;border:1px solid #1a2947;border-radius:10px;padding:12px;overflow:auto;white-space:pre-wrap}
code{font-family:ui-monospace,Consolas,monospace}
</style>
</head>
<body>
<h2>Patch file</h2>
<p>
I couldn’t reliably auto-edit your full original file inside this environment because your original HTML is very large and got truncated.
So I’m giving you the exact updated functions you can paste into your file to apply the 50% rule and red/green badge styling.
</p>

<pre><code>// ✅ Replace your existing buildGlyphSvg(...) with this one
async function buildGlyphSvg(seed, originScore){
  const h = await sha256Hex(seed);

  const humanPalette  = ['#22b7ff','#22e0d8','#4ade80','#22c55e'];
  const mixedPalette  = ['#22b7ff','#22e0d8','#a855f7','#38bdf8'];
  const aiPalette     = ['#f97316','#fb7185','#a855f7','#facc15'];

  let colors;
  if(typeof originScore === 'number'){
    // 50% rule: >= 0.50 => AI, otherwise Human
    colors = (originScore >= 0.50) ? aiPalette : humanPalette;
  }else{
    colors = mixedPalette;
  }

  const gridSize = 4;
  const cellSize = 22;
  const margin = 10;
  let shapes = '';

  for(let i=0;i&lt;gridSize*gridSize;i++){
    const hex = h[i];
    const val = parseInt(hex,16);
    if((val % 2) === 0){
      const row = Math.floor(i / gridSize);
      const col = i % gridSize;
      const cx = margin + cellSize/2 + col*cellSize;
      const cy = margin + cellSize/2 + row*cellSize;
      const r  = 4 + (val % 4);
      const color = colors[val % colors.length];
      shapes += `&lt;circle cx="${cx}" cy="${cy}" r="${r}" fill="${color}" opacity="0.9"&gt;
        &lt;animate attributeName="r" values="${r};${r+1.5};${r}" dur="${1+val/32}s" repeatCount="indefinite"/&gt;
      &lt;/circle&gt;`;
    }
  }

  return `  &lt;g id="trace_fp" transform="translate(20,22)"&gt;
    &lt;rect x="0" y="0" width="140" height="126" rx="22"
          fill="#020617" stroke="#1e293b" stroke-width="1.2"/&gt;
    &lt;rect x="3" y="3" width="134" height="120" rx="20"
          fill="#020617" stroke="#111827" stroke-width="1"/&gt;
    &lt;rect x="3" y="3" width="134" height="120" rx="20"
          fill="none" stroke="#1d4ed8" stroke-width="0.8" opacity="0.65"/&gt;

    &lt;g transform="translate(14,14)"&gt;
      &lt;g&gt;
        ${shapes}
        &lt;animateTransform attributeName="transform"
          type="rotate"
          from="0 44 44"
          to="360 44 44"
          dur="18s"
          repeatCount="indefinite"/&gt;
      &lt;/g&gt;
    &lt;/g&gt;

    &lt;g transform="translate(10,102)"&gt;
      &lt;rect x="0" y="0" width="32" height="16" rx="7"
            fill="#020617" stroke="#1e293b" stroke-width="1"/&gt;
      &lt;text x="16" y="11" text-anchor="middle"
            font-family="system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif"
            font-size="9" fill="#a5b4fc"&gt;ORIGIN&lt;/text&gt;

      &lt;rect x="38" y="0" width="34" height="16" rx="7"
            fill="#020617" stroke="#1e293b" stroke-width="1"/&gt;
      &lt;text x="55" y="11" text-anchor="middle"
            font-family="system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif"
            font-size="9" fill="#a5b4fc"&gt;HUMAN&lt;/text&gt;

      &lt;rect x="78" y="0" width="32" height="16" rx="7"
            fill="#020617" stroke="#1e293b" stroke-width="1"/&gt;
      &lt;text x="94" y="11" text-anchor="middle"
            font-family="system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif"
            font-size="9" fill="#a5b4fc"&gt;TT&lt;/text&gt;
    &lt;/g&gt;
  &lt;/g&gt;`;
}

// ✅ Inside buildBadge(), add this right after you set originInfo:
const isAI = (typeof originInfo.score === 'number') &amp;&amp; originInfo.score &gt;= 0.50;

// ✅ Also change your code prefix line to this:
const codePrefix = isAI ? 'AI' : 'HUMAN';

// ✅ And change your border_grad and timerDot/origin score fill INSIDE the SVG template like this:
/*
&lt;linearGradient id="border_grad" x1="0" y="0" x2="1" y2="0"&gt;
  &lt;stop offset="0" stop-color="${isAI ? '#ef4444' : '#22b7ff'}"/&gt;
  &lt;stop offset="0.5" stop-color="${isAI ? '#fb7185' : '#22e0d8'}"/&gt;
  &lt;stop offset="1" stop-color="${isAI ? '#f97316' : '#5b21ff'}"/&gt;
&lt;/linearGradient&gt;

&lt;circle id="timerDot" cx="0" cy="0" r="6" fill="${isAI ? '#ef4444' : '#16a34a'}"&gt;

&lt;text x="0" y="24" class="title"&gt;
  ${isAI ? "AI FLAGGED (Winston ≥ 50%)" : "HUMAN MARKED (Winston &lt; 50%)"}
&lt;/text&gt;

&lt;text x="84" y="118" class="value" fill="${isAI ? '#fecaca' : '#bbf7d0'}"&gt;
*/
</code></pre>

<p><b>Important:</b> Because your original file is huge, the safest approach is replacing those exact spots (functions/snippets) inside it.</p>
</body>
</html>
